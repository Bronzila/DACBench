

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Functionality through Wrappers &mdash; DACBench 01.02.2021 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Logging Experiments" href="logging.html" />
    <link rel="prev" title="Saving &amp; Loading Benchmark Configurations" href="modifications.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DACBench
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">How to Install DACBench</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks.html">The Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="modifications.html">Saving &amp; Loading Benchmark Configurations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Functionality through Wrappers</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting results</a></li>
<li class="toctree-l1"><a class="reference internal" href="cite.html">Citing DACBench</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DACBench</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Functionality through Wrappers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/source/wrappers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="functionality-through-wrappers">
<h1>Functionality through Wrappers<a class="headerlink" href="#functionality-through-wrappers" title="Permalink to this headline">¶</a></h1>
<p>In order to comfortably provide additional functionality to environments without changing the interface,
we can use so-called wrappers.
They execute environment resets and steps internally, but can either alter the environment behavior
(e.g. by adding noise) or record information about the environment.
To wrap an existing environment is simple:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dacbench.wrappers</span> <span class="kn">import</span> <span class="n">PerformanceTrackingWrapper</span>

<span class="n">wrapped_env</span> <span class="o">=</span> <span class="n">PerformanceTrackingWrapper</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
</pre></div>
</div>
<p>The provided environments for tracking performance, state and action information are designed to be
used with DACBench’s logging functionality.</p>
<span class="target" id="module-dacbench.wrappers.action_tracking_wrapper"></span><dl class="py class">
<dt id="dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper">
<em class="property">class </em><code class="sig-prename descclassname">dacbench.wrappers.action_tracking_wrapper.</code><code class="sig-name descname">ActionFrequencyWrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">action_interval</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">gym.core.Wrapper</span></code></p>
<p>Wrapper to action frequency.
Includes interval mode that returns frequencies in lists of len(interval) instead of one long list.</p>
<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper.get_actions">
<code class="sig-name descname">get_actions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper.get_actions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get state progression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>all states or all states and interval sorted states</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.array or np.array, np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper.render_action_tracking">
<code class="sig-name descname">render_action_tracking</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper.render_action_tracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Render action progression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>RBG data of action tracking</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">action</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.ActionFrequencyWrapper.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute environment step and record state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action</strong> (<em>int</em>) – action to execute</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>state, reward, done, metainfo</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array, float, bool, dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="dacbench.wrappers.action_tracking_wrapper.FigureCanvas">
<code class="sig-prename descclassname">dacbench.wrappers.action_tracking_wrapper.</code><code class="sig-name descname">FigureCanvas</code><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.FigureCanvas" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.backends.backend_agg.FigureCanvasAgg</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper">
<em class="property">class </em><code class="sig-prename descclassname">dacbench.wrappers.action_tracking_wrapper.</code><code class="sig-name descname">Wrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">gym.core.Env</span></code></p>
<p>Wraps the environment to allow a modular transformation.</p>
<p>This class is the base class for all wrappers. The subclass could override
some methods to change the behavior of the original environment without touching the
original code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don’t forget to call <code class="docutils literal notranslate"><span class="pre">super().__init__(env)</span></code> if the subclass overrides <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>.</p>
</div>
<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.class_name">
<em class="property">classmethod </em><code class="sig-name descname">class_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.class_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Override close in your subclass to perform any necessary cleanup.</p>
<p>Environments will automatically close() themselves when
garbage collected or when the program exits.</p>
</dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.compute_reward">
<code class="sig-name descname">compute_reward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">achieved_goal</span></em>, <em class="sig-param"><span class="n">desired_goal</span></em>, <em class="sig-param"><span class="n">info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.compute_reward" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.render">
<code class="sig-name descname">render</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'human'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders the environment.</p>
<p>The set of supported modes varies per environment. (And some
environments do not support rendering at all.) By convention,
if mode is:</p>
<ul class="simple">
<li><p>human: render to the current display or terminal and
return nothing. Usually for human consumption.</p></li>
<li><p>rgb_array: Return an numpy.ndarray with shape (x, y, 3),
representing RGB values for an x-by-y pixel image, suitable
for turning into a video.</p></li>
<li><p>ansi: Return a string (str) or StringIO.StringIO containing a
terminal-style text representation. The text can include newlines
and ANSI escape sequences (e.g. for colors).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>Make sure that your class’s metadata ‘render.modes’ key includes</dt><dd><p>the list of supported modes. It’s recommended to call super()
in implementations to use the functionality of this method.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<em>str</em>) – the mode to render with</p>
</dd>
</dl>
<p>Example:</p>
<dl>
<dt>class MyEnv(Env):</dt><dd><p>metadata = {‘render.modes’: [‘human’, ‘rgb_array’]}</p>
<dl class="simple">
<dt>def render(self, mode=’human’):</dt><dd><dl class="simple">
<dt>if mode == ‘rgb_array’:</dt><dd><p>return np.array(…) # return RGB frame suitable for video</p>
</dd>
<dt>elif mode == ‘human’:</dt><dd><p>… # pop up a window and render</p>
</dd>
<dt>else:</dt><dd><p>super(MyEnv, self).render(mode=mode) # just raise an exception</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the state of the environment and returns an initial observation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the initial observation.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>observation (object)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.seed">
<code class="sig-name descname">seed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the seed for this env’s random number generator(s).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some environments use multiple pseudorandom number generators.
We want to capture all such seeds used in order to ensure that
there aren’t accidental correlations between multiple generators.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Returns the list of seeds used in this env’s random</dt><dd><p>number generators. The first value in the list should be the
“main” seed, or the value which a reproducer should pass to
‘seed’. Often, the main seed equals the provided ‘seed’, but
this won’t be true if seed=None, for example.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list&lt;bigint&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.spec">
<em class="property">property </em><code class="sig-name descname">spec</code><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.spec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">action</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Run one timestep of the environment’s dynamics. When end of
episode is reached, you are responsible for calling <cite>reset()</cite>
to reset this environment’s state.</p>
<p>Accepts an action and returns a tuple (observation, reward, done, info).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action</strong> (<em>object</em>) – an action provided by the agent</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>agent’s observation of the current environment
reward (float) : amount of reward returned after previous action
done (bool): whether the episode has ended, in which case further step() calls will return undefined results
info (dict): contains auxiliary diagnostic information (helpful for debugging, and sometimes learning)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>observation (object)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dacbench.wrappers.action_tracking_wrapper.Wrapper.unwrapped">
<em class="property">property </em><code class="sig-name descname">unwrapped</code><a class="headerlink" href="#dacbench.wrappers.action_tracking_wrapper.Wrapper.unwrapped" title="Permalink to this definition">¶</a></dt>
<dd><p>Completely unwrap this env.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The base non-wrapped gym.Env instance</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>gym.Env</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="logging.html" class="btn btn-neutral float-right" title="Logging Experiments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="modifications.html" class="btn btn-neutral float-left" title="Saving &amp; Loading Benchmark Configurations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Theresa Eimer, Maximilian Reimer.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>