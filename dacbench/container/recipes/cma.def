Bootstrap: docker
From: python:3.7-slim

%labels
VERSION v0.1

%help
    Container with cma benchmark installed

%post

    apt update -y
    apt install build-essential gcc libssl-dev git -y

    echo "[LOG]: Installing cmake..."
    wget https://github.com/Kitware/CMake/releases/download/v3.10.2/cmake-3.10.2.tar.gz
    tar xvf cmake-3.10.2.tar.gz
    cd cmake-3.10.2
    ./bootstrap
    gmake
    make install

    wget https://github.com/Kitware/CMake/releases/download/v3.10.2/cmake-3.10.2.tar.gz
    tar xvf cmake-3.10.2.tar.gz
    cd cmake-3.10.2
    ./bootstrap
    gmake
    make install

    cd /home
    git clone https://github.com/automl/DACBench.git
    cd DACBench
    git checkout container_benchmark
    git submodule update --init --recursive
    pip install .[cma]
    ./dacbench/envs/rl-plan/fast-downward/build.py



%runscript
   python dacbench/container/remote_runner.py cma_benchmark.py $@